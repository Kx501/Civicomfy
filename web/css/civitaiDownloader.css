/* ComfyUI_Civitai_Downloader/web/css/civitaiDownloader.css */
/* Refactored for Sidebar Integration */

/* --- Remove Modal Specific Styles --- */
/* .civitai-downloader-modal, .civitai-downloader-modal.open,
   .civitai-downloader-modal-content, .civitai-downloader-header,
   .civitai-close-button ARE REMOVED */

/* --- Main Container for Plugin Content in Sidebar --- */
.civitai-downloader-sidebar-content {
    width: 100%;
    height: 100%; /* Fill the sidebar content area */
    background-color: var(--comfy-menu-bg); /* Match sidebar background */
    color: var(--comfy-text-color);
    display: flex; /* Use flex for internal layout */
    flex-direction: column;
    overflow: hidden; /* Prevent content spilling */
    /* Add padding if the ComfyUI content area doesn't have its own */
    /* padding: 10px; */
    /* box-sizing: border-box; */
}

/* Keep the body structure for tabs + content separation */
.civitai-downloader-body {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* Allow body to take remaining space */
    overflow: hidden; /* Manage internal scrolling */
}

/* --- Adjust Tabs for Sidebar --- */
.civitai-downloader-tabs {
    display: flex;
    border-bottom: 1px solid var(--border-color, #444);
    padding: 0 10px; /* Reduced padding for sidebar */
    flex-shrink: 0; /* Prevent tabs from shrinking */
    background-color: var(--comfy-menu-bg); /* Ensure background matches */
}

.civitai-downloader-tab {
    padding: 8px 12px; /* Smaller padding for sidebar tabs */
    cursor: pointer;
    border: none;
    background: none;
    color: var(--comfy-text-color);
    opacity: 0.7;
    position: relative;
    font-size: 0.9em; /* Slightly smaller font */
    /* Alignment adjustments might be needed depending on ComfyUI's sidebar */
    /* top: 1px; margin-bottom: -1px; */
}
.civitai-downloader-tab.active {
    opacity: 1;
    border-bottom: 2px solid var(--accent-color, #5c8aff); /* Thinner border */
    font-weight: bold;
}
.civitai-downloader-tab:hover { opacity: 1; }

/* --- Adjust Tab Content Area --- */
.civitai-downloader-tab-content {
    display: none; /* Keep hidden by default */
    padding: 15px; /* Adjust padding as needed */
    flex-grow: 1; /* Allow content to take space */
    overflow-y: auto; /* Enable scrolling ONLY for the content area */
    overflow-x: hidden;
}
.civitai-downloader-tab-content.active {
    display: block; /* Show active tab */
}

/* --- General Form Styling (Keep mostly as is, variables help) --- */
.civitai-form-group { margin-bottom: 15px; }
.civitai-form-group:last-child { margin-bottom: 0; }
.civitai-form-group label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9em; }

.civitai-input,
.civitai-select {
    width: 100%;
    padding: 8px; /* Slightly smaller padding */
    background-color: var(--comfy-input-bg);
    color: var(--comfy-text-color);
    border: 1px solid var(--border-color, #555);
    border-radius: 4px;
    box-sizing: border-box;
    font-size: 0.95em;
}
.civitai-input:focus,
.civitai-select:focus {
    outline: none;
    border-color: var(--accent-color, #5c8aff);
    /* box-shadow: 0 0 0 2px rgba(92, 138, 255, 0.3); */ /* Optional: Remove focus shadow if it looks out of place */
}

.civitai-form-row { display: flex; gap: 10px; flex-wrap: wrap; }
.civitai-form-row > .civitai-form-group { flex: 1; min-width: 150px; /* Adjust min-width */ }
.civitai-form-group.inline { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.civitai-form-group.inline label { margin-bottom: 0; order: 1; font-size: 0.9em; }
.civitai-checkbox { width: auto; order: 0; accent-color: var(--accent-color, #5c8aff); transform: scale(1.0); }

.civitai-button {
    background-color: var(--comfy-input-bg); color: var(--comfy-text-color);
    border: 1px solid var(--border-color, #555); padding: 8px 15px; /* Adjust padding */
    border-radius: 4px; cursor: pointer; font-size: 0.95em; /* Adjust font size */
    transition: background-color 0.2s ease, border-color 0.2s ease;
}
.civitai-button:hover { background-color: var(--comfy-input-bg-hover); border-color: #777; }
.civitai-button:disabled { opacity: 0.5; cursor: not-allowed; }

.civitai-button.primary { background-color: var(--accent-color, #5c8aff); border-color: var(--accent-color, #5c8aff); color: white; }
.civitai-button.primary:hover { background-color: #4a7ee0; border-color: #4a7ee0; }
.civitai-button.primary:disabled { background-color: var(--accent-color, #5c8aff); border-color: var(--accent-color, #5c8aff); }
.civitai-button.danger { background-color: #e64b4b; border-color: #e64b4b; color: white; }
.civitai-button.danger:hover { background-color: #d93a3a; border-color: #d93a3a; }
.civitai-button.small { padding: 5px 10px; font-size: 0.85em; }

/* --- Status Tab Styling (Adapt List Item Layout if needed) --- */
.civitai-status-section { margin-bottom: 20px; }
.civitai-status-section h3 { margin-top: 0; margin-bottom: 10px; border-bottom: 1px solid var(--border-color, #444); padding-bottom: 6px; font-size: 1.0em; }

.civitai-download-list { display: flex; flex-direction: column; gap: 10px; /* Reduced gap */ }

.civitai-download-item {
    display: flex; gap: 10px; /* Reduced gap */ align-items: flex-start;
    padding: 10px; /* Reduced padding */ border-radius: 4px;
    background-color: var(--comfy-input-bg); border: 1px solid var(--border-color, #555);
}

.civitai-download-thumbnail {
    width: 60px; height: 60px; /* Smaller thumbnail */ object-fit: cover;
    border-radius: 3px; background-color: #333; flex-shrink: 0; margin-top: 3px;
}

.civitai-download-info {
    flex-grow: 1; display: flex; flex-direction: column; gap: 3px; /* Reduced gap */
    overflow: hidden;
}
.civitai-download-info strong { font-size: 0.95em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.civitai-download-info p { margin: 0; font-size: 0.85em; color: #ccc; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.civitai-download-info .filename { font-style: italic; color: #bbb; }
.civitai-download-info .error-message { color: #ff6b6b; font-size: 0.8em; white-space: normal; word-break: break-word; }

.civitai-download-actions { display: flex; align-items: center; gap: 6px; margin-left: auto; flex-shrink: 0; }

.civitai-progress-container {
    margin-top: 6px; width: 100%; background-color: var(--comfy-menu-bg);
    border-radius: 3px; overflow: hidden; height: 16px; /* Smaller bar */
    border: 1px solid var(--border-color, #555);
}
.civitai-progress-bar {
    height: 100%; background-color: var(--accent-color, #5c8aff); color: white;
    line-height: 16px; /* Match height */ font-size: 10px; /* Smaller text */ font-weight: bold;
    transition: width 0.3s ease-out; min-width: 15px; width: 0%; white-space: nowrap; overflow: hidden;
    text-align: center; /* Center text if visible */
}
/* Progress bar status colors (keep as is) */
.civitai-progress-bar.completed { background-color: #4caf50; }
.civitai-progress-bar.failed { background-color: #f44336; }
.civitai-progress-bar.cancelled { background-color: #9e9e9e; }

.civitai-speed-indicator { font-size: 0.8em; color: #ccc; margin-top: 3px; text-align: right; }

/* --- Search Tab Styling (Adapt Layout) --- */
.civitai-search-controls {
    display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;
}
.civitai-search-controls .civitai-input { flex-grow: 1; }
.civitai-search-controls .civitai-select { min-width: 120px; /* Adjust */ }
.civitai-search-controls .civitai-button { align-self: flex-end; }

.civitai-search-results { margin-top: 15px; }
.civitai-search-item {
    display: flex; gap: 10px; align-items: flex-start; margin-bottom: 10px; padding: 10px;
    border-radius: 4px; background-color: var(--comfy-input-bg);
    border: 1px solid var(--border-color, #555);
}

.civitai-search-thumbnail {
    width: 80px; height: 80px; /* Adjust size */ object-fit: cover;
    border-radius: 3px; background-color: #333; flex-shrink: 0;
}

.civitai-search-info {
    flex-grow: 1; display: flex; flex-direction: column; gap: 4px; overflow: hidden;
}
.civitai-search-info h4 { margin: 0; font-size: 1.0em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.civitai-search-info p { margin: 0; font-size: 0.85em; color: #ccc; }
.civitai-search-tags { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 6px; }
.civitai-search-tag { background-color: rgba(255, 255, 255, 0.1); color: #eee; padding: 2px 6px; border-radius: 8px; font-size: 0.75em; }
.civitai-search-stats span { margin-right: 10px; font-size: 0.8em; color: #bbb; }
.civitai-search-stats i { margin-right: 3px; }

.civitai-search-actions {
    display: flex; flex-direction: column; gap: 5px; align-items: flex-end;
    margin-left: auto; flex-shrink: 0;
}

/* --- Settings Tab Styling (Adapt Layout) --- */
.civitai-settings-container { display: grid; grid-template-columns: 1fr; gap: 15px; }
/* @media (min-width: 768px) { */ /* Probably remove media query for sidebar */
    /* .civitai-settings-container { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); } */
/* } */

.civitai-settings-section {
    background-color: var(--comfy-input-bg); padding: 12px;
    border-radius: 4px; border: 1px solid var(--border-color, #555);
}
.civitai-settings-section h4 { margin-top: 0; margin-bottom: 10px; border-bottom: 1px solid var(--border-color, #444); padding-bottom: 6px; font-size: 1.0em; }

/* --- Toast Notification Repositioning --- */
.civitai-toast {
    position: fixed;
    bottom: 15px; /* Adjust position */
    /* Attach relative to the main window or sidebar area? Left/right? */
    right: 20px; /* Example: bottom right */
    /* left: 50%; transform: translateX(-50%); */ /* Remove centering */
    background-color: rgba(0, 0, 0, 0.85);
    color: white; padding: 10px 18px; border-radius: 4px;
    z-index: 1050; /* Ensure it's above most UI */
    font-size: 0.9em; opacity: 0;
    transition: opacity 0.3s ease, bottom 0.3s ease;
    pointer-events: none;
}
.civitai-toast.show { opacity: 1; bottom: 25px; }
.civitai-toast.success { background-color: rgba(76, 175, 80, 0.9); }
.civitai-toast.error { background-color: rgba(244, 67, 54, 0.9); }
.civitai-toast.info { background-color: rgba(33, 150, 243, 0.9); }

/* --- Tooltip Styles (Keep As Is) --- */
[data-tooltip] { position: relative; cursor: help; }
[data-tooltip]::after { /* ...no change... */ }
[data-tooltip]:hover::after { /* ...no change... */ }

/* --- Font Awesome Icon Fix (if needed) --- */
/* Ensure icons used in search stats/actions render */
.civitai-search-stats i, .civitai-search-actions i {
    font-family: "Font Awesome 5 Free"; /* Check the correct font family */
    font-weight: 900; /* For solid icons */
    font-style: normal;
}